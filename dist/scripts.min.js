let pokemonRepository=function(){let t=[],e=0;function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function n(e){"object"==typeof e&&"name"in e&&"detailsURL"in e?t.push(e):console.error("Pokemon is not correct")}function a(){return t}async function i(){let t=await fetch(`https://pokeapi.co/api/v2/pokemon/?limit=151?offset=${e}&limit=50`),o=await t.json();return await Promise.all(o.results.map(function(t){return fetch(t.url).then(function(t){return t.json()}).then(function(e){let o={name:t.name,detailsURL:t.url,imageUrl:e.sprites.other.dream_world.front_default,type:e.types[0].type.name};e.types.length>1&&"normal"===o.type&&(o.type=e.types[1].type.name),n(o)})}))}async function l(t){let e=t.detailsURL;try{let o=await fetch(e),n=await o.json();t.imgURL=n.sprites.other.dream_world.front_default,t.height=n.height/10,t.weight=n.weight/10,t.types=n.types,t.abilities=n.abilities}catch(a){console.error(a)}}function s(t){l(t).then(function(){var e;e=t,$(".image-background").attr("class","image-background").addClass(e.type),$("#pokemonModalTitle").text(o(e.name)),$("#pokemonModalImage").attr("src",e.imgURL).addClass("modal-image img-fluid"),$("#pokemonModalHeight").text(`Height: ${e.height} m`).addClass("pt-3"),$("#pokemonModalWeight").text(`Weight: ${e.weight} kg`),$("#pokemonModalTypes").text(`Types: ${e.types.map(t=>o(t.type.name)).join(", ")}`),$("#pokemonModalAbilities").text(`Abilities: ${e.abilities.map(t=>o(t.ability.name)).join(", ")}`)})}function r(t){let e=$("<div>").addClass("pokemon-div col-9 col-md-4 col-lg-3 border m-1 rounded-lg "+t.type),n=$("<button>").addClass("pokemon-button btn d-flex justify-content-between align-items-center").attr("data-toggle","modal").attr("data-target","#pokemonModal"),a=$("<img>").attr("src",t.imageUrl).attr("alt",`Image of ${t.name}`).addClass("pokemon-image img-fluid");n.append(a);let i=$("<span>").addClass("text-white").text(o(t.name));n.append(i),e.append(n),$(".row").append(e).addClass("justify-content-center"),setTimeout(()=>e.addClass("visible"),50),n.click(function(){s(t)})}let d;(d=$("#search-bar")).on("input",function(){let e=d.val().toLowerCase(),o=t.filter(t=>t.name.toLowerCase().startsWith(e)),n=$(".row");n.empty(),0===o.length?n.text(`





Can't find the Pokemon you are looking for`):o.forEach(t=>{r(t)})});let c=document.querySelector("#search-icon"),p=document.querySelector("#search-bar-container");c.addEventListener("click",function(){p.classList.toggle("d-none")}),$(window).on("scroll",function(){$(window).innerHeight()+$(window).scrollTop()>=$(document).height()&&(e+=50,i().then(function(){pokemonRepository.getAll().slice(-50).forEach(function(t){pokemonRepository.addListItem(t)})}))});let m=$("#scrollToTopButton");return $(window).scroll(function(){$(window).scrollTop()>20?m.show():m.hide()}),m.click(function(){$("html, body").animate({scrollTop:0},"slow")}),{add:n,getAll:a,addListItem:r,loadList:i,loadDetails:l,showDetails:s}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})});